# Lab 3: Test your network with NUTS
# Part 1. Introduction to NUTS

let's setup our Inventory and Tests so we can run them from the CLI

1\. Open the VSCode instance that we started Nautobot from (should have yellow borders).


2\. Click "Terminal" in the top navbar, then "New Terminal".

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/5f3625d8-c96e-44a3-b816-32f4887606dd/ascreenshot.jpeg?tl_px=0,0&br_px=1376,769&force_format=jpeg&q=100&width=1120.0&wat=1&wat_opacity=1&wat_gravity=northwest&wat_url=https://colony-recorder.s3.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=358,-23)


3\. Type `docker ps | grep clab` and press Enter to validate that your containerlab hosts are running

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/e8928f8f-9350-46c6-b9f9-f14b0891c281/ascreenshot.jpeg?tl_px=0,118&br_px=1800,1125&force_format=jpeg&q=100&width=1120.0)


4\. Right-click the "inventory" folder and Click "New File". Name it `hosts.yaml`. Add our clab hosts to the file.

```
---
clab-onug-nyc01-rtr1:
  hostname: clab-onug-nyc01-rtr1
  groups:
    - eos
clab-onug-nyc01-rtr2:
  hostname: clab-onug-nyc01-rtr2
  groups:
    - eos
clab-onug-nyc01-sw1:
  hostname: clab-onug-nyc01-sw1
  groups:
    - eos
clab-onug-nyc01-sw2:
  hostname: clab-onug-nyc01-sw2
  groups:
    - eos
```

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/b4c7ba82-3863-4cae-a34f-44208f9fb937/ascreenshot.jpeg?tl_px=423,0&br_px=1800,769&force_format=jpeg&q=100&width=1120.0&wat=1&wat_opacity=1&wat_gravity=northwest&wat_url=https://colony-recorder.s3.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=748,271)


5\. Make sure it matches your actual running hosts and save the file!

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/ce7c2957-bf1c-4660-8298-3e9fde9a9f99/ascreenshot.jpeg?tl_px=0,0&br_px=1376,769&force_format=jpeg&q=100&width=1120.0&wat=1&wat_opacity=1&wat_gravity=northwest&wat_url=https://colony-recorder.s3.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=157,75)


6\. Right click on the "tests" folder

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/4ec9846b-1f3f-45f9-b47a-b57731cc81b9/ascreenshot.jpeg?tl_px=423,24&br_px=1800,793&force_format=jpeg&q=100&width=1120.0&wat=1&wat_opacity=1&wat_gravity=northwest&wat_url=https://colony-recorder.s3.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=732,276)


7\. Create a new file named `test_lldp.yaml`

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/a9421fdf-fddc-4e49-92d8-24d462d2874e/ascreenshot.jpeg?tl_px=423,37&br_px=1800,806&force_format=jpeg&q=100&width=1120.0&wat=1&wat_opacity=1&wat_gravity=northwest&wat_url=https://colony-recorder.s3.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=780,277)


8\. Define your LLDP test to run for the whole "eos" group. Don't forget to save!

```
---
- test_class: TestNapalmLldpNeighborsCount
  test_data:
    - groups: eos
      neighbor_count: 3
```

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/c87ca075-1d53-44a2-a28a-b9dd114f8759/ascreenshot.jpeg?tl_px=0,0&br_px=1800,1006&force_format=jpeg&q=100&width=1120.0)


9\. Let's go back to the terminal and run `poetry shell` to create a virtual env with our dependencies installed so we can run our tests

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/b044b183-1cec-4974-99b1-f29e5a245994/ascreenshot.jpeg?tl_px=108,355&br_px=1484,1125&force_format=jpeg&q=100&width=1120.0&wat=1&wat_opacity=1&wat_gravity=northwest&wat_url=https://colony-recorder.s3.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=524,441)


10\. Type `pytest tests/*` to execute your test. If everything has gone according to the plan, you should see all of your LLDP tests passing

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/b7fdcff8-8ba1-466a-a076-cd6baa5a8c6e/ascreenshot.jpeg?tl_px=0,118&br_px=1800,1125&force_format=jpeg&q=100&width=1120.0)


11\. Now, let's create our ping tests. Right click again on the "tests" folder

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/704fb927-7589-45f2-9c36-6b11c1f71879/ascreenshot.jpeg?tl_px=423,19&br_px=1800,788&force_format=jpeg&q=100&width=1120.0&wat=1&wat_opacity=1&wat_gravity=northwest&wat_url=https://colony-recorder.s3.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=742,277)


12\. Create a new file named `test_ping.yaml`

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/5e852344-7268-4209-a3b9-de96993ce38f/ascreenshot.jpeg?tl_px=423,31&br_px=1800,800&force_format=jpeg&q=100&width=1120.0&wat=1&wat_opacity=1&wat_gravity=northwest&wat_url=https://colony-recorder.s3.amazonaws.com/images/watermarks/FB923C_standard.png&wat_pad=777,277)


13\. Define your ping test. This time, we're using hosts instead of groups as the arguments are different for each one

```
---
- test_class: TestNapalmPing
  test_data:
    - host: clab-onug-nyc01-rtr1
      destination: 172.18.0.9
      expected: SUCCESS
      max_drop: 1
```

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/51b8d021-39cf-4103-9db8-90895275b541/ascreenshot.jpeg?tl_px=0,0&br_px=1800,1006&force_format=jpeg&q=100&width=1120.0)


14\. Back to the terminal, let's run our tests again with `pytest tests/*`.

![](https://ajeuwbhvhr.cloudimg.io/https://colony-recorder.s3.amazonaws.com/files/2025-05-24/cc516940-3ff3-48ec-a7a0-2255d58de7b9/ascreenshot.jpeg?tl_px=0,118&br_px=1800,1125&force_format=jpeg&q=100&width=1120.0)


Where are `TestNapalmLldpNeighborsCount` and `TestNapalmPing` defined? Check out the [Test Bundles Docs](https://nuts.readthedocs.io/en/latest/testbundles/alltestbundles.html).

[‚¨ÖÔ∏è Previous](./22.deploy_containerlab_topology.md) | [üè† Home](index.md) | [Next ‚û°Ô∏è](./31.run_nuts_tests_pt.1.md)
